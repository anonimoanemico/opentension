function Dialog(a,b){var c=this,d=gj.dialog.methods;return c.open=function(){return d.open(this)},c.close=function(){return d.close(this)},c.isOpen=function(){return d.isOpen(this)},$.extend(a,c),d.init.apply(a,b),a}"undefined"==typeof gj&&(gj={}),"undefined"==typeof gj.dialog&&(gj.dialog={plugins:{}}),gj.dialog.config={base:{autoOpen:!0,closeOnEscape:!0,draggable:!0,height:"auto",minHeight:void 0,maxHeight:void 0,width:300,minWidth:void 0,maxWidth:void 0,modal:!1,resizable:!1,title:"Dialog",uiLibrary:void 0,style:{modal:"gj-modal",content:"gj-content",header:"gj-header",headerTitle:"gj-title",headerCloseButton:"gj-close",body:"gj-body",footer:"gj-dialog-footer"}},bootstrap:{style:{modal:"modal",content:"modal-content",header:"modal-header",headerTitle:"modal-title",headerCloseButton:"close",body:"modal-body",footer:"gj-dialog-footer modal-footer"}},jqueryui:{style:{modal:"gj-modal",content:"ui-widget ui-widget-content gj-dialog-content",header:"gj-dialog-ui-header ui-widget-header",headerTitle:"gj-dialog-ui-title",headerCloseButton:"gj-dialog-ui-close ui-button ui-widget ui-state-default ui-corner-all",body:"gj-dialog-ui-body",footer:"gj-dialog-footer"}},foundation:{style:{modal:"reveal-modal-bg",content:"reveal-modal gj-dialog-fd-content",header:"",headerTitle:"gj-dialog-fd-title gj-dialog-unselectable",headerCloseButton:"close-reveal-modal right gj-dialog-fd-close",body:"gj-dialog-fd-body",footer:"gj-dialog-footer gj-dialog-fd-footer"}}},gj.dialog.events={initialized:function(a){a.trigger("initialized")},opening:function(a){a.trigger("opening")},opened:function(a){a.trigger("opened")},closing:function(a){a.trigger("closing")},closed:function(a){a.trigger("closed")},drag:function(a){a.trigger("drag")},dragStart:function(a){a.trigger("dragStart")},dragStop:function(a){a.trigger("dragStop")},resize:function(a){a.trigger("resize")},resizeStart:function(a){a.trigger("resizeStart")},resizeStop:function(a){a.trigger("resizeStop")}},gj.dialog.methods={init:function(a){var b,c,d;gj.dialog.methods.configure(this,a||{});for(b in gj.dialog.plugins)gj.dialog.plugins.hasOwnProperty(b)&&gj.dialog.plugins[b].configure(this);d=this.data();for(c in d)gj.dialog.events.hasOwnProperty(c)&&(this.on(c,d[c]),delete d[c]);return gj.dialog.methods.initialize(this),gj.dialog.events.initialized(this),this},configure:function(a,b){var c=$.extend(!0,{},gj.dialog.config.base),d=gj.dialog.methods.getHTMLConfiguration(a);b.uiLibrary&&"bootstrap"===b.uiLibrary||d.uiLibrary&&"bootstrap"===d.uiLibrary?$.extend(!0,c,gj.dialog.config.bootstrap):b.uiLibrary&&"jqueryui"===b.uiLibrary||d.uiLibrary&&"jqueryui"===d.uiLibrary?$.extend(!0,c,gj.dialog.config.jqueryui):(b.uiLibrary&&"foundation"===b.uiLibrary||d.uiLibrary&&"foundation"===d.uiLibrary)&&$.extend(!0,c,gj.dialog.config.foundation),$.extend(!0,c,d),$.extend(!0,c,b),a.data(c)},getHTMLConfiguration:function(a){var b=a.data(),c=a[0].attributes;return c.title&&(b.title=c.title.nodeValue),c.width&&(b.width=c.width.nodeValue),c.height&&(b.height=c.height.nodeValue),b},initialize:function(a){var b,c,d=a.data();a.addClass(d.style.content),gj.dialog.methods.setSize(a),d.closeOnEscape&&$(document).keyup(function(b){27===b.keyCode&&a.close()}),b=a.children('div[data-role="body"]'),0===b.length?(b=$('<div data-role="body"/>').addClass(d.style.body),a.wrapInner(b)):b.addClass(d.style.body),c=a.children('div[data-role="header"]'),0===c.length&&(c=$('<div data-role="header" />'),gj.dialog.methods.createHeader(a,c)),c.addClass(d.style.header),a.children('div[data-role="footer"]').addClass(d.style.footer),a.find('[data-role="close"]').on("click",function(){a.close()}),d.draggable&&$.fn.draggable&&gj.dialog.methods.draggable(a,c),d.resizable&&$.fn.draggable&&gj.dialog.methods.resizable(a),gj.dialog.methods.setPosition(a),d.modal&&a.wrapAll('<div data-role="modal" class="'+d.style.modal+'"/>'),d.autoOpen&&a.open()},setSize:function(a){var b=a.data();b.width&&a.css("width",b.width),b.height&&a.css("height",b.height)},createHeader:function(a,b){var c=a.data(),d=$('<button type="button" data-role="close"><span>Ã—</span></button>');d.addClass(c.style.headerCloseButton),b.append(d),b.append('<h4 data-role="title" class="'+c.style.headerTitle+'">'+c.title+"</h4>"),a.prepend(b)},setPosition:function(a){a.css("position","absolute"),a.css("left",$(window).width()/2-a.width()/2),a.css("top",$(window).height()/2-a.height()/2)},draggable:function(a,b){a.appendTo("body"),b.addClass("gj-draggable"),a.draggable({handle:b,start:function(){a.addClass("gj-dialog-unselectable"),gj.dialog.events.dragStart(a)},stop:function(){a.removeClass("gj-dialog-unselectable"),gj.dialog.events.dragStop(a)}})},resizable:function(a){var b={drag:gj.dialog.methods.resize,start:function(){a.addClass("gj-dialog-unselectable"),gj.dialog.events.resizeStart(a)},stop:function(){a.removeClass("gj-dialog-unselectable"),gj.dialog.events.resizeStop(a)}};a.append($('<div class="gj-resizable-handle gj-resizable-n"></div>').draggable($.extend(!0,{},b))),a.append($('<div class="gj-resizable-handle gj-resizable-e"></div>').draggable($.extend(!0,{},b))),a.append($('<div class="gj-resizable-handle gj-resizable-s"></div>').draggable($.extend(!0,{},b))),a.append($('<div class="gj-resizable-handle gj-resizable-w"></div>').draggable($.extend(!0,{},b))),a.append($('<div class="gj-resizable-handle gj-resizable-ne"></div>').draggable($.extend(!0,{},b))),a.append($('<div class="gj-resizable-handle gj-resizable-nw"></div>').draggable($.extend(!0,{},b))),a.append($('<div class="gj-resizable-handle gj-resizable-sw"></div>').draggable($.extend(!0,{},b))),a.append($('<div class="gj-resizable-handle gj-resizable-se"></div>').draggable($.extend(!0,{},b)))},resize:function(a,b){var c,d,e,f,g,h,i;c=$(this),d=c.parent(),e=d.data(),c.hasClass("gj-resizable-n")?(f=d.height()-b.top,h=d.offset().top+b.top):c.hasClass("gj-resizable-e")?g=d.width()+b.left:c.hasClass("gj-resizable-s")?f=d.height()+b.top:c.hasClass("gj-resizable-w")?(g=d.width()-b.left,i=d.offset().left+b.left):c.hasClass("gj-resizable-ne")?(f=d.height()-b.top,h=d.offset().top+b.top,g=d.width()+b.left):c.hasClass("gj-resizable-nw")?(f=d.height()-b.top,h=d.offset().top+b.top,g=d.width()-b.left,i=d.offset().left+b.left):c.hasClass("gj-resizable-se")?(f=d.height()+b.top,g=d.width()+b.left):c.hasClass("gj-resizable-sw")&&(f=d.height()+b.top,g=d.width()-b.left,i=d.offset().left+b.left),f&&(!e.minHeight||f>=e.minHeight)&&(!e.maxHeight||f<=e.maxHeight)&&(d.height(f),h&&d.css("top",h)),g&&(!e.minWidth||g>=e.minWidth)&&(!e.maxWidth||g<=e.maxWidth)&&(d.width(g),i&&d.css("left",i)),gj.dialog.events.resize(d)},open:function(a){return a.is(":visible")||(gj.dialog.events.opening(a),a.css("display","block"),a.closest('div[data-role="modal"]').css("display","block"),gj.dialog.events.opened(a)),a},close:function(a){return a.is(":visible")&&(gj.dialog.events.closing(a),a.css("display","none"),a.closest('div[data-role="modal"]').css("display","none"),gj.dialog.events.closed(a)),a},isOpen:function(a){return a.is(":visible")}},function(a){a.fn.dialog=function(a){if("object"!=typeof a&&a){if(gj.dialog.methods[a])return gj.dialog.methods[a].apply(this,[this].concat(Array.prototype.slice.call(arguments,1)));throw"Method "+a+" does not exist."}return new Dialog(this,arguments)}}(jQuery);